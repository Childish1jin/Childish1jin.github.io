<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">



















  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link rel="stylesheet" href="https://fonts.cat.net/css?family=Lato:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|Roboto Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext">
  






<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">

<link rel="stylesheet" href="/css/main.css?v=7.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.2.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.2.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.2.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <meta name="description" content="1234567891011121314151617181920# 绘图案例 an example of matplotlib%matplotlib inlineimport numpy as npimport matplotlib.pyplot as pltfrom scipy.special import jnfrom IPython.display import display, clear_">
<meta name="keywords" content="统计学">
<meta property="og:type" content="article">
<meta property="og:title" content="【面向数据科学家的实用统计学】1">
<meta property="og:url" content="http://yoursite.com/2019/08/26/【面向数据科学家的实用统计学】1/index.html">
<meta property="og:site_name" content="Barry&#39;s blog">
<meta property="og:description" content="1234567891011121314151617181920# 绘图案例 an example of matplotlib%matplotlib inlineimport numpy as npimport matplotlib.pyplot as pltfrom scipy.special import jnfrom IPython.display import display, clear_">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://yoursite.com/2019/08/26/【面向数据科学家的实用统计学】1/post-name%5Coutput_0_0.png">
<meta property="og:image" content="http://yoursite.com/2019/08/26/【面向数据科学家的实用统计学】1/Myblog%5Coutput_18_0.png">
<meta property="og:image" content="http://yoursite.com/2019/08/26/【面向数据科学家的实用统计学】1/Myblog%5Coutput_19_0.png">
<meta property="og:image" content="http://yoursite.com/2019/08/26/【面向数据科学家的实用统计学】1/Myblog%5Coutput_20_0.png">
<meta property="og:image" content="http://yoursite.com/2019/08/26/【面向数据科学家的实用统计学】1/Myblog%5Coutput_21_0.png">
<meta property="og:image" content="http://yoursite.com/2019/08/26/【面向数据科学家的实用统计学】1/Myblog%5Coutput_22_0.png">
<meta property="og:image" content="http://yoursite.com/2019/08/26/【面向数据科学家的实用统计学】1/Myblog%5Coutput_23_0.png">
<meta property="og:image" content="http://yoursite.com/2019/08/26/【面向数据科学家的实用统计学】1/Myblog%5Coutput_24_0.png">
<meta property="og:image" content="http://yoursite.com/2019/08/26/【面向数据科学家的实用统计学】1/Myblog%5Coutput_28_0.png">
<meta property="og:image" content="http://yoursite.com/2019/08/26/【面向数据科学家的实用统计学】1/Myblog%5Coutput_29_0.png">
<meta property="og:image" content="http://yoursite.com/2019/08/26/【面向数据科学家的实用统计学】1/Myblog%5Coutput_30_1.png">
<meta property="og:image" content="http://yoursite.com/2019/08/26/【面向数据科学家的实用统计学】1/Myblog%5Coutput_32_0.png">
<meta property="og:updated_time" content="2019-08-26T10:03:42.790Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="【面向数据科学家的实用统计学】1">
<meta name="twitter:description" content="1234567891011121314151617181920# 绘图案例 an example of matplotlib%matplotlib inlineimport numpy as npimport matplotlib.pyplot as pltfrom scipy.special import jnfrom IPython.display import display, clear_">
<meta name="twitter:image" content="http://yoursite.com/2019/08/26/【面向数据科学家的实用统计学】1/post-name%5Coutput_0_0.png">



  <link rel="alternate" href="/atom.xml" title="Barry's blog" type="application/atom+xml">



  
  
  <link rel="canonical" href="http://yoursite.com/2019/08/26/【面向数据科学家的实用统计学】1/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>【面向数据科学家的实用统计学】1 | Barry's blog</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Barry's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">Run!!!</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/26/【面向数据科学家的实用统计学】1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Barry Wang">
      <meta itemprop="description" content="run barry, run!">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Barry's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">【面向数据科学家的实用统计学】1

              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-08-26 15:33:56 / 修改时间：18:03:42" itemprop="dateCreated datePublished" datetime="2019-08-26T15:33:56+08:00">2019-08-26</time>
            </span>
          

          
            

            
          

          

          
            
            
          

          
          

          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 绘图案例 an example of matplotlib</span></span><br><span class="line">%matplotlib inline</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> scipy.special <span class="keyword">import</span> jn</span><br><span class="line"><span class="keyword">from</span> IPython.display <span class="keyword">import</span> display, clear_output</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">x = np.linspace(<span class="number">0</span>,<span class="number">5</span>)</span><br><span class="line">f, ax = plt.subplots()</span><br><span class="line">ax.set_title(<span class="string">"Bessel functions"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">10</span>):</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    ax.plot(x, jn(x,n))</span><br><span class="line">    clear_output(wait=<span class="literal">True</span>)</span><br><span class="line">    display(f)</span><br><span class="line"></span><br><span class="line"><span class="comment"># close the figure at the end, so we don't get a duplicate</span></span><br><span class="line"><span class="comment"># of the last plot</span></span><br><span class="line">plt.close()</span><br></pre></td></tr></table></figure>

<p><img src="/2019/08/26/【面向数据科学家的实用统计学】1/post-name%5Coutput_0_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line"></span><br><span class="line">warnings.filterwarnings(action=<span class="string">'ignore'</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> Series,DataFrame</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(&#123;<span class="string">'类别'</span>:[<span class="string">'水果'</span>,<span class="string">'水果'</span>,<span class="string">'水果'</span>,<span class="string">'蔬菜'</span>,<span class="string">'蔬菜'</span>,<span class="string">'肉类'</span>,<span class="string">'肉类'</span>],</span><br><span class="line">                <span class="string">'产地'</span>:[<span class="string">'美国'</span>,<span class="string">'中国'</span>,<span class="string">'中国'</span>,<span class="string">'中国'</span>,<span class="string">'新西兰'</span>,<span class="string">'新西兰'</span>,<span class="string">'美国'</span>],</span><br><span class="line">                <span class="string">'水果'</span>:[<span class="string">'苹果'</span>,<span class="string">'梨'</span>,<span class="string">'草莓'</span>,<span class="string">'番茄'</span>,<span class="string">'黄瓜'</span>,<span class="string">'羊肉'</span>,<span class="string">'牛肉'</span>],</span><br><span class="line">               <span class="string">'数量'</span>:[<span class="number">5</span>,<span class="number">5</span>,<span class="number">9</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">10</span>,<span class="number">8</span>],</span><br><span class="line">               <span class="string">'价格'</span>:[<span class="number">5</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">13</span>,<span class="number">20</span>]&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(df)</span><br></pre></td></tr></table></figure>

<pre><code>    产地  价格  数量  水果  类别
0   美国   5   5  苹果  水果
1   中国   5   5   梨  水果
2   中国  10   9  草莓  水果
3   中国   3   3  番茄  蔬菜
4  新西兰   3   2  黄瓜  蔬菜
5  新西兰  13  10  羊肉  肉类
6   美国  20   8  牛肉  肉类</code></pre><a id="more"></a>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas_profiling</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pandas_profiling.describe(df)</span><br></pre></td></tr></table></figure>

<pre><code>{&apos;table&apos;: {&apos;n&apos;: 7,
  &apos;nvar&apos;: 5,
  &apos;total_missing&apos;: 0.0,
  &apos;n_duplicates&apos;: 0,
  &apos;memsize&apos;: &apos;360.0 B&apos;,
  &apos;recordsize&apos;: &apos;51.4 B&apos;,
  &apos;NUM&apos;: 2,
  &apos;DATE&apos;: 0,
  &apos;CONST&apos;: 0,
  &apos;CAT&apos;: 2,
  &apos;UNIQUE&apos;: 1,
  &apos;CORR&apos;: 0,
  &apos;RECODED&apos;: 0,
  &apos;BOOL&apos;: 0,
  &apos;UNSUPPORTED&apos;: 0,
  &apos;REJECTED&apos;: 0},
 &apos;variables&apos;:    count distinct_count is_unique memorysize mode n_infinite n_missing  \
 产地     7              3     False        136   中国          0         0   
 价格     7              5     False        136    3          0         0   
 数量     7              6     False        136    5          0         0   
 水果     7              7      True        136   苹果          0         0   
 类别     7              3     False        136   水果          0         0   

    p_infinite p_missing  p_unique   ...        mean  min  \
 产地          0         0  0.428571   ...         NaN  NaN   
 价格          0         0  0.714286   ...     8.42857    3   
 数量          0         0  0.857143   ...           6    2   
 水果          0         0         1   ...         NaN  NaN   
 类别          0         0  0.428571   ...         NaN  NaN   

                                        mini_histogram n_zeros p_zeros range  \
 产地                                                NaN     NaN     NaN   NaN   
 价格  data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA...       0       0    17   
 数量  data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA...       0       0     8   
 水果                                                NaN     NaN     NaN   NaN   
 类别                                                NaN     NaN     NaN   NaN   

     skewness      std  sum variance  
 产地       NaN      NaN  NaN      NaN  
 价格   1.15335  6.32079   59  39.9524  
 数量  0.049099  3.05505   42  9.33333  
 水果       NaN      NaN  NaN      NaN  
 类别       NaN      NaN  NaN      NaN  

 [5 rows x 34 columns],
 &apos;freq&apos;: {&apos;产地&apos;: 中国     3
  美国     2
  新西兰    2
  Name: 产地, dtype: int64, &apos;价格&apos;: 5     2
  3     2
  13    1
  20    1
  10    1
  Name: 价格, dtype: int64, &apos;数量&apos;: 5     2
  10    1
  3     1
  2     1
  9     1
  8     1
  Name: 数量, dtype: int64, &apos;水果&apos;: 苹果    1
  羊肉    1
  梨     1
  黄瓜    1
  牛肉    1
  番茄    1
  草莓    1
  Name: 水果, dtype: int64, &apos;类别&apos;: 水果    3
  肉类    2
  蔬菜    2
  Name: 类别, dtype: int64},
 &apos;correlations&apos;: {&apos;pearson&apos;:           价格        数量
  价格  1.000000  0.785417
  数量  0.785417  1.000000, &apos;spearman&apos;:           价格        数量
  价格  1.000000  0.880771
  数量  0.880771  1.000000}}</code></pre><h1 id="透视表"><a href="#透视表" class="headerlink" title="透视表"></a>透视表</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df</span><br></pre></td></tr></table></figure>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}</code></pre><p></style><p></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>产地</th>
      <th>价格</th>
      <th>数量</th>
      <th>水果</th>
      <th>类别</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>美国</td>
      <td>5</td>
      <td>5</td>
      <td>苹果</td>
      <td>水果</td>
    </tr>
    <tr>
      <th>1</th>
      <td>中国</td>
      <td>5</td>
      <td>5</td>
      <td>梨</td>
      <td>水果</td>
    </tr>
    <tr>
      <th>2</th>
      <td>中国</td>
      <td>10</td>
      <td>9</td>
      <td>草莓</td>
      <td>水果</td>
    </tr>
    <tr>
      <th>3</th>
      <td>中国</td>
      <td>3</td>
      <td>3</td>
      <td>番茄</td>
      <td>蔬菜</td>
    </tr>
    <tr>
      <th>4</th>
      <td>新西兰</td>
      <td>3</td>
      <td>2</td>
      <td>黄瓜</td>
      <td>蔬菜</td>
    </tr>
    <tr>
      <th>5</th>
      <td>新西兰</td>
      <td>13</td>
      <td>10</td>
      <td>羊肉</td>
      <td>肉类</td>
    </tr>
    <tr>
      <th>6</th>
      <td>美国</td>
      <td>20</td>
      <td>8</td>
      <td>牛肉</td>
      <td>肉类</td>
    </tr>
  </tbody>
</table>
</div>



<ul>
<li>按照产地和类别重新索引，并在价格和数量上执行mean函数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(df.pivot_table(index=[<span class="string">'产地'</span>,<span class="string">'类别'</span>]))</span><br></pre></td></tr></table></figure>

<pre><code>          价格    数量
产地  类别            
中国  水果   7.5   7.0
    蔬菜   3.0   3.0
新西兰 肉类  13.0  10.0
    蔬菜   3.0   2.0
美国  水果   5.0   5.0
    肉类  20.0   8.0</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(df.pivot_table(columns=[<span class="string">'产地'</span>,<span class="string">'类别'</span>]))</span><br></pre></td></tr></table></figure>

<pre><code>    产地   类别
价格  中国   水果     7.5
         蔬菜     3.0
    新西兰  肉类    13.0
         蔬菜     3.0
    美国   水果     5.0
         肉类    20.0
数量  中国   水果     7.0
         蔬菜     3.0
    新西兰  肉类    10.0
         蔬菜     2.0
    美国   水果     5.0
         肉类     8.0
dtype: float64</code></pre><h1 id="交叉表"><a href="#交叉表" class="headerlink" title="交叉表"></a>交叉表</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(pd.crosstab(df[<span class="string">'类别'</span>],df[<span class="string">'产地'</span>],margins= <span class="literal">True</span>))</span><br></pre></td></tr></table></figure>

<pre><code>产地   中国  新西兰  美国  All
类别                   
水果    2    0   1    3
肉类    0    1   1    2
蔬菜    1    1   0    2
All   3    2   2    7</code></pre><h1 id="violinplot"><a href="#violinplot" class="headerlink" title="violinplot"></a>violinplot</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iris = sns.load_dataset(<span class="string">'iris'</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iris.head()</span><br></pre></td></tr></table></figure>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}</code></pre><p></style><p></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sepal_length</th>
      <th>sepal_width</th>
      <th>petal_length</th>
      <th>petal_width</th>
      <th>species</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>5.1</td>
      <td>3.5</td>
      <td>1.4</td>
      <td>0.2</td>
      <td>setosa</td>
    </tr>
    <tr>
      <th>1</th>
      <td>4.9</td>
      <td>3.0</td>
      <td>1.4</td>
      <td>0.2</td>
      <td>setosa</td>
    </tr>
    <tr>
      <th>2</th>
      <td>4.7</td>
      <td>3.2</td>
      <td>1.3</td>
      <td>0.2</td>
      <td>setosa</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4.6</td>
      <td>3.1</td>
      <td>1.5</td>
      <td>0.2</td>
      <td>setosa</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5.0</td>
      <td>3.6</td>
      <td>1.4</td>
      <td>0.2</td>
      <td>setosa</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sns.set(style=<span class="string">'whitegrid'</span>)</span><br><span class="line"></span><br><span class="line">ax = sns.violinplot(x = iris[<span class="string">'species'</span>],y = iris[<span class="string">'sepal_length'</span>])</span><br></pre></td></tr></table></figure>

<p><img src="/2019/08/26/【面向数据科学家的实用统计学】1/Myblog%5Coutput_18_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tips = sns.load_dataset(<span class="string">'tips'</span>)</span><br><span class="line">ax = sns.violinplot(x = tips[<span class="string">'total_bill'</span>])</span><br></pre></td></tr></table></figure>

<p><img src="/2019/08/26/【面向数据科学家的实用统计学】1/Myblog%5Coutput_19_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ax = sns.violinplot(x=<span class="string">"day"</span>, y=<span class="string">"total_bill"</span>, data=tips)</span><br></pre></td></tr></table></figure>

<p><img src="/2019/08/26/【面向数据科学家的实用统计学】1/Myblog%5Coutput_20_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ax = sns.violinplot(x=<span class="string">"day"</span>, y=<span class="string">"total_bill"</span>, hue=<span class="string">"smoker"</span>,</span><br><span class="line">                    data=tips, palette=<span class="string">"muted"</span>)</span><br></pre></td></tr></table></figure>

<p><img src="/2019/08/26/【面向数据科学家的实用统计学】1/Myblog%5Coutput_21_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ax = sns.violinplot(x = tips[<span class="string">'day'</span>],y = tips[<span class="string">'total_bill'</span>],</span><br><span class="line">                   hue = tips[<span class="string">'smoker'</span>],</span><br><span class="line">                   palette = <span class="string">'muted'</span>,split = <span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<p><img src="/2019/08/26/【面向数据科学家的实用统计学】1/Myblog%5Coutput_22_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ax = sns.violinplot(x=<span class="string">"time"</span>, y=<span class="string">"tip"</span>, data=tips,</span><br><span class="line"><span class="meta">... </span>                    order=[<span class="string">"Dinner"</span>, <span class="string">"Lunch"</span>])</span><br></pre></td></tr></table></figure>

<p><img src="/2019/08/26/【面向数据科学家的实用统计学】1/Myblog%5Coutput_23_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">planets = sns.load_dataset(<span class="string">"planets"</span>)</span><br><span class="line">ax = sns.violinplot(x=<span class="string">"orbital_period"</span>, y=<span class="string">"method"</span>,</span><br><span class="line">                    data=planets[planets.orbital_period &lt; <span class="number">1000</span>],</span><br><span class="line">                    scale=<span class="string">"width"</span>, palette=<span class="string">"Set3"</span>)</span><br></pre></td></tr></table></figure>

<p><img src="/2019/08/26/【面向数据科学家的实用统计学】1/Myblog%5Coutput_24_0.png" alt="png"></p>
<p>使用验证集（holdout set）去验证结果的性能<br>目标混洗（target shuffle）</p>
<ul>
<li>自助样本（bootstrap sample）:从观测数据集中做有放回的抽取而得到的样本</li>
<li>重抽样：在观测数据中重复抽取样本的过程</li>
</ul>
<h1 id="标准正态分布和QQ图"><a href="#标准正态分布和QQ图" class="headerlink" title="标准正态分布和QQ图"></a>标准正态分布和QQ图</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">a = np.random.normal(<span class="number">5</span>,<span class="number">5</span>,<span class="number">250</span>)</span><br><span class="line">b = np.random.rayleigh(<span class="number">5</span>,<span class="number">250</span>)</span><br><span class="line"></span><br><span class="line">percs = np.linspace(<span class="number">0</span>,<span class="number">100</span>,<span class="number">21</span>)</span><br><span class="line">qn_a = np.percentile(a, percs)</span><br><span class="line">qn_b = np.percentile(b, percs)</span><br><span class="line"></span><br><span class="line">plt.plot(qn_a,qn_b, ls=<span class="string">""</span>, marker=<span class="string">"o"</span>)</span><br><span class="line"></span><br><span class="line">x = np.linspace(np.min((qn_a.min(),qn_b.min())), np.max((qn_a.max(),qn_b.max())))</span><br><span class="line">plt.plot(x,x, color=<span class="string">"k"</span>, ls=<span class="string">"--"</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/2019/08/26/【面向数据科学家的实用统计学】1/Myblog%5Coutput_28_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> stats</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line">stats.probplot(x, plot=sns.mpl.pyplot);</span><br></pre></td></tr></table></figure>

<p><img src="/2019/08/26/【面向数据科学家的实用统计学】1/Myblog%5Coutput_29_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scipy.stats <span class="keyword">as</span> stats</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">'seaborn'</span>)</span><br><span class="line"></span><br><span class="line">x = np.random.beta(<span class="number">2</span>, <span class="number">3</span>, size=<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">fig, ax = plt.subplots(<span class="number">1</span>, <span class="number">1</span>, figsize=(<span class="number">6</span>, <span class="number">4</span>))</span><br><span class="line">stats.probplot(x, dist=stats.beta, sparams=(<span class="number">2</span>,<span class="number">3</span>), plot=plt, fit=<span class="literal">False</span>)</span><br><span class="line">stats.probplot(x, dist=stats.beta, sparams=(<span class="number">1</span>,<span class="number">2</span>), plot=plt, fit=<span class="literal">False</span>)</span><br><span class="line">stats.probplot(x, dist=stats.beta, sparams=(<span class="number">1</span>,<span class="number">4</span>), plot=plt, fit=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Remove the regression lines</span></span><br><span class="line">ax.get_lines()[<span class="number">1</span>].remove()</span><br><span class="line">ax.get_lines()[<span class="number">2</span>].remove()</span><br><span class="line">ax.get_lines()[<span class="number">3</span>].remove()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Change colour of scatter</span></span><br><span class="line">ax.get_lines()[<span class="number">0</span>].set_markerfacecolor(<span class="string">'C0'</span>)</span><br><span class="line">ax.get_lines()[<span class="number">1</span>].set_markerfacecolor(<span class="string">'C1'</span>)</span><br><span class="line">ax.get_lines()[<span class="number">2</span>].set_markerfacecolor(<span class="string">'C2'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Add on y=x line</span></span><br><span class="line">ax.plot([<span class="number">0</span>, <span class="number">1</span>], [<span class="number">0</span>, <span class="number">1</span>], c=<span class="string">'C3'</span>)</span><br></pre></td></tr></table></figure>

<pre><code>[&lt;matplotlib.lines.Line2D at 0x7f46d182d470&gt;]</code></pre><p><img src="/2019/08/26/【面向数据科学家的实用统计学】1/Myblog%5Coutput_30_1.png" alt="png"></p>
<p><a href="https://seaborn.pydata.org/tutorial/distributions.html" target="_blank" rel="noopener">visualize the distribution of dataset by seaborn</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x = np.random.normal(size = <span class="number">100</span>)</span><br><span class="line">sns.distplot(x);</span><br></pre></td></tr></table></figure>

<p><img src="/2019/08/26/【面向数据科学家的实用统计学】1/Myblog%5Coutput_32_0.png" alt="png"></p>
<h1 id="假设检验"><a href="#假设检验" class="headerlink" title="假设检验"></a>假设检验</h1><ul>
<li>零假设：完全归咎于偶然性的假设</li>
<li>备择假设：与零假设相反，即实验者希望证实的假设</li>
<li>单向假设：在假设检验中，只从一个方向上计数偶然性结果</li>
<li>双向假设：在假设检验中，从正反两个方向上计数偶然性结果</li>
</ul>
<h1 id="重抽样"><a href="#重抽样" class="headerlink" title="重抽样"></a>重抽样</h1><ul>
<li>重抽样过程主要包括两种类型：自助法和置换检验</li>
<li>置换检验：将两组或多组样本组合在一起，并将观测值随机（或穷尽）重新分配给重抽样</li>
</ul>
<h2 id="置换检验"><a href="#置换检验" class="headerlink" title="置换检验"></a>置换检验</h2><p>置换过程涉及两组或多组样本，通常是A/B测试。置换意味着改变一组值的顺序。要对一个假设进行置换检验，首先需要将从A组和B组中得到的结果组合在一起。这就是零假设的逻辑，即无论处理制定的哪个组，都是无差别的。然后，从组合集中随机抽取出各个组，并查看组间的差异情况，实现对假设的检验。置换过程。</p>
<ul>
<li>将各个组得出的结果组合为一个数据集</li>
<li>对组合得到的数据做随机混洗，然后从中随机抽取（有放回）一个规模与A组相同的重抽样样本</li>
<li>在余下的数据中，随机抽取（无放回）一个规模与B组相同的重抽样样本</li>
<li>无论对原始样本计算的是哪一种统计量或估计量，现在对重抽样进行重新计算，并记录结果，这就构成了一次置换迭代。</li>
<li>重复执行R次，生成检验统计量的置换分布</li>
</ul>
<p>现在回头查看所观测到的组间差异，并与置换差异进行对比。如果观测到的差异位于置换差异内，说明置换检验的结果并不能证明任何事情，因为观测到的差异落在偶然可能产生之差异的范围内。但是，如果观测到的差异大部分落在置换分布之外，那么可以认为“与偶然性无关”。即称差异是<font color="red">统计显著。</font></p>
<h1 id="统计显著性和P值"><a href="#统计显著性和P值" class="headerlink" title="统计显著性和P值"></a>统计显著性和P值</h1><ul>
<li><p>统计显著性： 用于衡量一个实验所生成的结果是否会比随机情况下可能给出的结果更加极端。如果生成的结果超出了随机变异的范围，则称为统计显著的</p>
</li>
<li><p>第一类错误：错误地将一个由随机导致的效果归结为真</p>
</li>
<li><p>第二类错误：错误地将一个为真的效果归结为由随机导致的</p>
</li>
</ul>
<h1 id="方差分析"><a href="#方差分析" class="headerlink" title="方差分析"></a>方差分析</h1><ul>
<li>如果不是对两个组做A/B测试，而是要对比多个包含数值型数据的组（A,B,C,D），这时可以使用方差分析。方差分析是一种检验多个组之间统计显著性差异的统计学方法。</li>
</ul>
<ul>
<li>F统计量：一种归一化统计量，用于衡量多个组均值间的差异是否会超过随机模型的逾期</li>
<li>方差分解：从整体统计量中，分离出单个值的贡献情况</li>
</ul>
<h1 id="卡方检验"><a href="#卡方检验" class="headerlink" title="卡方检验"></a>卡方检验</h1><ul>
<li><p>适用于计数数据，可以检验数据与预期分布的拟合程度</p>
</li>
<li><p>d.f. 自由度</p>
</li>
</ul>
<h1 id="多臂老虎机"><a href="#多臂老虎机" class="headerlink" title="多臂老虎机"></a>多臂老虎机</h1><h2 id="汤普森抽样"><a href="#汤普森抽样" class="headerlink" title="汤普森抽样"></a><font color="red">汤普森抽样</font></h2><p><a href="https://www.cnblogs.com/gczr/p/11220187.html" target="_blank" rel="noopener">推荐算法之Thompson(汤普森)采样</a></p>

      
    </div>

    

    
      
    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        
          
        
        <div class="post-tags">
          
            <a href="/tags/统计学/" rel="tag"># 统计学</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/08/10/house prices XGBOOST/" rel="next" title="kaggle house prices XGBOOST">
                <i class="fa fa-chevron-left"></i> kaggle house prices XGBOOST
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/08/26/Myblog/" rel="prev" title="Myblog">
                Myblog <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  




<% if(theme.gitment.enable) { %>
<div id="gitment_title" class="gitment_title"></div>
<div id="container" style="display:none"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script>
  const myTheme = {
    render(state, instance) {
      const container = document.createElement('div');
      container.lang = "en-US";
      container.className = 'gitment-container gitment-root-container';
      container.appendChild(instance.renderHeader(state, instance));
      container.appendChild(instance.renderEditor(state, instance));
      container.appendChild(instance.renderComments(state, instance));
      container.appendChild(instance.renderFooter(state, instance));
      return container;
    }
  }

  function showGitment() {
    $("#gitment_title").attr("style", "display:none");
    $("#container").attr("style", "").addClass("gitment_container");
    var gitment = new Gitment({
      id: decodeURI(window.location.pathname),
      theme: myTheme,
      owner: 'Childish1jin',
      repo: 'Childish1jin.github.io',
      oauth: {
        client_id: '89b78712c0406690e89a',
        client_secret: '7a1f1201723900ccd24fee6d3df54781b80904ff'
      }
    });
    gitment.render('container');
  }

  showGitment();
</script>
<% } %>

        </%></%></div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Barry Wang</p>
              <div class="site-description motion-element" itemprop="description">run barry, run!</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">16</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">2</span>
                    <span class="site-state-item-name">分类</span>
                  
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">6</span>
                    <span class="site-state-item-name">标签</span>
                  
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          

          

          
          

          
        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#透视表"><span class="nav-number">1.</span> <span class="nav-text">透视表</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#交叉表"><span class="nav-number">2.</span> <span class="nav-text">交叉表</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#violinplot"><span class="nav-number">3.</span> <span class="nav-text">violinplot</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#标准正态分布和QQ图"><span class="nav-number">4.</span> <span class="nav-text">标准正态分布和QQ图</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#假设检验"><span class="nav-number">5.</span> <span class="nav-text">假设检验</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#重抽样"><span class="nav-number">6.</span> <span class="nav-text">重抽样</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#置换检验"><span class="nav-number">6.1.</span> <span class="nav-text">置换检验</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#统计显著性和P值"><span class="nav-number">7.</span> <span class="nav-text">统计显著性和P值</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#方差分析"><span class="nav-number">8.</span> <span class="nav-text">方差分析</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#卡方检验"><span class="nav-number">9.</span> <span class="nav-text">卡方检验</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#多臂老虎机"><span class="nav-number">10.</span> <span class="nav-text">多臂老虎机</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#汤普森抽样"><span class="nav-number">10.1.</span> <span class="nav-text">汤普森抽样</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Barry Wang</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.2.0</div>


<div>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<span id="busuanzi_container_site_pv" style="display:none">
    本站总访问量 <span id="busuanzi_value_site_pv"></span> 次
    <span class="post-meta-divider">|</span>
</span>
<span id="busuanzi_container_site_uv" style="display:none">
    有<span id="busuanzi_value_site_uv"></span>人看过我的博客啦
</span>
</div>



        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>










  
  













  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>




  <script src="/js/utils.js?v=7.2.0"></script>

  <script src="/js/motion.js?v=7.2.0"></script>



  
  


  <script src="/js/affix.js?v=7.2.0"></script>

  <script src="/js/schemes/pisces.js?v=7.2.0"></script>



  
  <script src="/js/scrollspy.js?v=7.2.0"></script>
<script src="/js/post-details.js?v=7.2.0"></script>



  <script src="/js/next-boot.js?v=7.2.0"></script>

  

  

  

  

  


  


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  

  

  

  

  

  

  

  

  

  


  

</body>
</html>
