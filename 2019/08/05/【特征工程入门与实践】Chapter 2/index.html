<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">



















  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link rel="stylesheet" href="https://fonts.cat.net/css?family=Lato:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|Roboto Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext">
  






<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">

<link rel="stylesheet" href="/css/main.css?v=7.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.2.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.2.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.2.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <meta name="description" content="特征理解123456import pandas as pdimport numpy as npimport matplotlib.pyplot as plt import seaborn as sns %matplotlib inline plt.style.use(&apos;fivethirtyeight&apos;)  1salary_ranges = pd.read_csv(&apos;Salary_Ranges_by">
<meta name="keywords" content="特征工程入门与实践">
<meta property="og:type" content="article">
<meta property="og:title" content="【特征工程入门与实践】Chapter 2">
<meta property="og:url" content="http://yoursite.com/2019/08/05/【特征工程入门与实践】Chapter 2/index.html">
<meta property="og:site_name" content="Barry&#39;s blog">
<meta property="og:description" content="特征理解123456import pandas as pdimport numpy as npimport matplotlib.pyplot as plt import seaborn as sns %matplotlib inline plt.style.use(&apos;fivethirtyeight&apos;)  1salary_ranges = pd.read_csv(&apos;Salary_Ranges_by">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20190805115038575.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Vlcnl3aA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20190805115016513.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Vlcnl3aA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20190805115054956.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Vlcnl3aA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20190805115108835.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Vlcnl3aA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20190805115120405.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Vlcnl3aA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20190805115137317.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Vlcnl3aA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20190805115150292.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Vlcnl3aA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20190805115159105.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Vlcnl3aA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20190805115214123.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Vlcnl3aA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20190805115222759.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Vlcnl3aA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20190805115230335.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Vlcnl3aA==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/2019080511524064.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Vlcnl3aA==,size_16,color_FFFFFF,t_70">
<meta property="og:updated_time" content="2019-08-09T03:15:12.588Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="【特征工程入门与实践】Chapter 2">
<meta name="twitter:description" content="特征理解123456import pandas as pdimport numpy as npimport matplotlib.pyplot as plt import seaborn as sns %matplotlib inline plt.style.use(&apos;fivethirtyeight&apos;)  1salary_ranges = pd.read_csv(&apos;Salary_Ranges_by">
<meta name="twitter:image" content="https://img-blog.csdnimg.cn/20190805115038575.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Vlcnl3aA==,size_16,color_FFFFFF,t_70">



  <link rel="alternate" href="/atom.xml" title="Barry's blog" type="application/atom+xml">



  
  
  <link rel="canonical" href="http://yoursite.com/2019/08/05/【特征工程入门与实践】Chapter 2/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>【特征工程入门与实践】Chapter 2 | Barry's blog</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Barry's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">Run!!!</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/05/【特征工程入门与实践】Chapter 2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Barry Wang">
      <meta itemprop="description" content="run barry, run!">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Barry's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">【特征工程入门与实践】Chapter 2

              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-08-05 11:55:52" itemprop="dateCreated datePublished" datetime="2019-08-05T11:55:52+08:00">2019-08-05</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-08-09 11:15:12" itemprop="dateModified" datetime="2019-08-09T11:15:12+08:00">2019-08-09</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/feature-project/" itemprop="url" rel="index"><span itemprop="name">feature project</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="特征理解"><a href="#特征理解" class="headerlink" title="特征理解"></a>特征理解</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns </span><br><span class="line">%matplotlib inline </span><br><span class="line">plt.style.use(<span class="string">'fivethirtyeight'</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">salary_ranges = pd.read_csv(<span class="string">'Salary_Ranges_by_Job_Classification.csv'</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">salary_ranges.head()</span><br></pre></td></tr></table></figure>

<a id="more"></a>


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}</code></pre><p></style><p></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>SetID</th>
      <th>Job Code</th>
      <th>Eff Date</th>
      <th>Sal End Date</th>
      <th>Salary SetID</th>
      <th>Sal Plan</th>
      <th>Grade</th>
      <th>Step</th>
      <th>Biweekly High Rate</th>
      <th>Biweekly Low Rate</th>
      <th>Union Code</th>
      <th>Extended Step</th>
      <th>Pay Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>COMMN</td>
      <td>0109</td>
      <td>07/01/2009 12:00:00 AM</td>
      <td>06/30/2010 12:00:00 AM</td>
      <td>COMMN</td>
      <td>SFM</td>
      <td>00000</td>
      <td>1</td>
      <td>$0.00</td>
      <td>$0.00</td>
      <td>330</td>
      <td>0</td>
      <td>C</td>
    </tr>
    <tr>
      <th>1</th>
      <td>COMMN</td>
      <td>0110</td>
      <td>07/01/2009 12:00:00 AM</td>
      <td>06/30/2010 12:00:00 AM</td>
      <td>COMMN</td>
      <td>SFM</td>
      <td>00000</td>
      <td>1</td>
      <td>$15.00</td>
      <td>$15.00</td>
      <td>323</td>
      <td>0</td>
      <td>D</td>
    </tr>
    <tr>
      <th>2</th>
      <td>COMMN</td>
      <td>0111</td>
      <td>07/01/2009 12:00:00 AM</td>
      <td>06/30/2010 12:00:00 AM</td>
      <td>COMMN</td>
      <td>SFM</td>
      <td>00000</td>
      <td>1</td>
      <td>$25.00</td>
      <td>$25.00</td>
      <td>323</td>
      <td>0</td>
      <td>D</td>
    </tr>
    <tr>
      <th>3</th>
      <td>COMMN</td>
      <td>0112</td>
      <td>07/01/2009 12:00:00 AM</td>
      <td>06/30/2010 12:00:00 AM</td>
      <td>COMMN</td>
      <td>SFM</td>
      <td>00000</td>
      <td>1</td>
      <td>$50.00</td>
      <td>$50.00</td>
      <td>323</td>
      <td>0</td>
      <td>D</td>
    </tr>
    <tr>
      <th>4</th>
      <td>COMMN</td>
      <td>0114</td>
      <td>07/01/2009 12:00:00 AM</td>
      <td>06/30/2010 12:00:00 AM</td>
      <td>COMMN</td>
      <td>SFM</td>
      <td>00000</td>
      <td>1</td>
      <td>$100.00</td>
      <td>$100.00</td>
      <td>323</td>
      <td>0</td>
      <td>M</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">salary_ranges.columns</span><br></pre></td></tr></table></figure>

<pre><code>Index([&apos;SetID&apos;, &apos;Job Code&apos;, &apos;Eff Date&apos;, &apos;Sal End Date&apos;, &apos;Salary SetID&apos;,
       &apos;Sal Plan&apos;, &apos;Grade&apos;, &apos;Step&apos;, &apos;Biweekly High Rate&apos;, &apos;Biweekly Low Rate&apos;,
       &apos;Union Code&apos;, &apos;Extended Step&apos;, &apos;Pay Type&apos;],
      dtype=&apos;object&apos;)</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">salary_ranges.info()</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &apos;pandas.core.frame.DataFrame&apos;&gt;
RangeIndex: 1356 entries, 0 to 1355
Data columns (total 13 columns):
SetID                 1356 non-null object
Job Code              1356 non-null object
Eff Date              1356 non-null object
Sal End Date          1356 non-null object
Salary SetID          1356 non-null object
Sal Plan              1356 non-null object
Grade                 1356 non-null object
Step                  1356 non-null int64
Biweekly High Rate    1356 non-null object
Biweekly Low Rate     1356 non-null object
Union Code            1356 non-null int64
Extended Step         1356 non-null int64
Pay Type              1356 non-null object
dtypes: int64(3), object(10)
memory usage: 137.8+ KB</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">salary_ranges.isnull().sum()</span><br></pre></td></tr></table></figure>

<pre><code>SetID                 0
Job Code              0
Eff Date              0
Sal End Date          0
Salary SetID          0
Sal Plan              0
Grade                 0
Step                  0
Biweekly High Rate    0
Biweekly Low Rate     0
Union Code            0
Extended Step         0
Pay Type              0
dtype: int64</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">salary_ranges.describe()</span><br></pre></td></tr></table></figure>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}</code></pre><p></style><p></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Step</th>
      <th>Union Code</th>
      <th>Extended Step</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>1356.000000</td>
      <td>1356.000000</td>
      <td>1356.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>1.294985</td>
      <td>392.676991</td>
      <td>0.150442</td>
    </tr>
    <tr>
      <th>std</th>
      <td>1.045816</td>
      <td>338.100562</td>
      <td>1.006734</td>
    </tr>
    <tr>
      <th>min</th>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>1.000000</td>
      <td>21.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>1.000000</td>
      <td>351.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>1.000000</td>
      <td>790.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>5.000000</td>
      <td>990.000000</td>
      <td>11.000000</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">salary_ranges[[<span class="string">'Biweekly High Rate'</span>,<span class="string">'Grade'</span>]]</span><br></pre></td></tr></table></figure>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}</code></pre><p></style><p></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Biweekly High Rate</th>
      <th>Grade</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>$0.00</td>
      <td>00000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>$15.00</td>
      <td>00000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>$25.00</td>
      <td>00000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>$50.00</td>
      <td>00000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>$100.00</td>
      <td>00000</td>
    </tr>
    <tr>
      <th>5</th>
      <td>$100.00</td>
      <td>00000</td>
    </tr>
    <tr>
      <th>6</th>
      <td>$200.00</td>
      <td>00000</td>
    </tr>
    <tr>
      <th>7</th>
      <td>$500.00</td>
      <td>00000</td>
    </tr>
    <tr>
      <th>8</th>
      <td>$0.00</td>
      <td>00000</td>
    </tr>
    <tr>
      <th>9</th>
      <td>$10630.00</td>
      <td>0140F</td>
    </tr>
    <tr>
      <th>10</th>
      <td>$9175.00</td>
      <td>0150F</td>
    </tr>
    <tr>
      <th>11</th>
      <td>$4142.00</td>
      <td>0170F</td>
    </tr>
    <tr>
      <th>12</th>
      <td>$5242.00</td>
      <td>0180F</td>
    </tr>
    <tr>
      <th>13</th>
      <td>$3293.00</td>
      <td>0190F</td>
    </tr>
    <tr>
      <th>14</th>
      <td>$4496.00</td>
      <td>0380F</td>
    </tr>
    <tr>
      <th>15</th>
      <td>$4676.00</td>
      <td>0381F</td>
    </tr>
    <tr>
      <th>16</th>
      <td>$4762.00</td>
      <td>0382F</td>
    </tr>
    <tr>
      <th>17</th>
      <td>$11255.00</td>
      <td>0390F</td>
    </tr>
    <tr>
      <th>18</th>
      <td>$10376.00</td>
      <td>0395F</td>
    </tr>
    <tr>
      <th>19</th>
      <td>$9096.00</td>
      <td>0400F</td>
    </tr>
    <tr>
      <th>20</th>
      <td>$9456.00</td>
      <td>0401F</td>
    </tr>
    <tr>
      <th>21</th>
      <td>$9641.00</td>
      <td>0402F</td>
    </tr>
    <tr>
      <th>22</th>
      <td>$7392.00</td>
      <td>0488F</td>
    </tr>
    <tr>
      <th>23</th>
      <td>$7687.00</td>
      <td>0489F</td>
    </tr>
    <tr>
      <th>24</th>
      <td>$7835.00</td>
      <td>0490F</td>
    </tr>
    <tr>
      <th>25</th>
      <td>$3794.62</td>
      <td>0720F</td>
    </tr>
    <tr>
      <th>26</th>
      <td>$1326.00</td>
      <td>05475</td>
    </tr>
    <tr>
      <th>27</th>
      <td>$1425.00</td>
      <td>05625</td>
    </tr>
    <tr>
      <th>28</th>
      <td>$1532.00</td>
      <td>05775</td>
    </tr>
    <tr>
      <th>29</th>
      <td>$1646.00</td>
      <td>05925</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1326</th>
      <td>$4857.00</td>
      <td>Q37H0</td>
    </tr>
    <tr>
      <th>1327</th>
      <td>$4586.00</td>
      <td>Q50H0</td>
    </tr>
    <tr>
      <th>1328</th>
      <td>$4770.00</td>
      <td>Q51H0</td>
    </tr>
    <tr>
      <th>1329</th>
      <td>$4857.00</td>
      <td>Q52H0</td>
    </tr>
    <tr>
      <th>1330</th>
      <td>$5237.00</td>
      <td>Q60H0</td>
    </tr>
    <tr>
      <th>1331</th>
      <td>$5445.00</td>
      <td>Q61H0</td>
    </tr>
    <tr>
      <th>1332</th>
      <td>$5548.00</td>
      <td>Q62H0</td>
    </tr>
    <tr>
      <th>1333</th>
      <td>$6616.00</td>
      <td>Q80H0</td>
    </tr>
    <tr>
      <th>1334</th>
      <td>$6881.00</td>
      <td>Q81H0</td>
    </tr>
    <tr>
      <th>1335</th>
      <td>$7011.00</td>
      <td>Q82H0</td>
    </tr>
    <tr>
      <th>1336</th>
      <td>$6515.00</td>
      <td>Q90H0</td>
    </tr>
    <tr>
      <th>1337</th>
      <td>$2178.00</td>
      <td>06500</td>
    </tr>
    <tr>
      <th>1338</th>
      <td>$2342.00</td>
      <td>06650</td>
    </tr>
    <tr>
      <th>1339</th>
      <td>$2700.00</td>
      <td>06940</td>
    </tr>
    <tr>
      <th>1340</th>
      <td>$2354.00</td>
      <td>06660</td>
    </tr>
    <tr>
      <th>1341</th>
      <td>$3234.00</td>
      <td>07310</td>
    </tr>
    <tr>
      <th>1342</th>
      <td>$1909.00</td>
      <td>06230</td>
    </tr>
    <tr>
      <th>1343</th>
      <td>$2332.00</td>
      <td>06640</td>
    </tr>
    <tr>
      <th>1344</th>
      <td>$2459.00</td>
      <td>06750</td>
    </tr>
    <tr>
      <th>1345</th>
      <td>$2354.00</td>
      <td>06660</td>
    </tr>
    <tr>
      <th>1346</th>
      <td>$3199.00</td>
      <td>07290</td>
    </tr>
    <tr>
      <th>1347</th>
      <td>$3426.00</td>
      <td>07430</td>
    </tr>
    <tr>
      <th>1348</th>
      <td>$3689.00</td>
      <td>07580</td>
    </tr>
    <tr>
      <th>1349</th>
      <td>$1951.00</td>
      <td>06275</td>
    </tr>
    <tr>
      <th>1350</th>
      <td>$2786.00</td>
      <td>07005</td>
    </tr>
    <tr>
      <th>1351</th>
      <td>$2145.00</td>
      <td>06470</td>
    </tr>
    <tr>
      <th>1352</th>
      <td>$3041.00</td>
      <td>07185</td>
    </tr>
    <tr>
      <th>1353</th>
      <td>$3132.00</td>
      <td>07245</td>
    </tr>
    <tr>
      <th>1354</th>
      <td>$3453.00</td>
      <td>07445</td>
    </tr>
    <tr>
      <th>1355</th>
      <td>$3453.00</td>
      <td>07445</td>
    </tr>
  </tbody>
</table>
<p>1356 rows × 2 columns</p>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">salary_ranges[<span class="string">'Biweekly High Rate'</span>] = salary_ranges[<span class="string">'Biweekly High Rate'</span>].map(<span class="keyword">lambda</span> x : x.replace(<span class="string">'$'</span>,<span class="string">''</span>))</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">salary_ranges[<span class="string">'Biweekly High Rate'</span>]</span><br></pre></td></tr></table></figure>

<pre><code>0           0.00
1          15.00
2          25.00
3          50.00
4         100.00
5         100.00
6         200.00
7         500.00
8           0.00
9       10630.00
10       9175.00
11       4142.00
12       5242.00
13       3293.00
14       4496.00
15       4676.00
16       4762.00
17      11255.00
18      10376.00
19       9096.00
20       9456.00
21       9641.00
22       7392.00
23       7687.00
24       7835.00
25       3794.62
26       1326.00
27       1425.00
28       1532.00
29       1646.00
          ...   
1326     4857.00
1327     4586.00
1328     4770.00
1329     4857.00
1330     5237.00
1331     5445.00
1332     5548.00
1333     6616.00
1334     6881.00
1335     7011.00
1336     6515.00
1337     2178.00
1338     2342.00
1339     2700.00
1340     2354.00
1341     3234.00
1342     1909.00
1343     2332.00
1344     2459.00
1345     2354.00
1346     3199.00
1347     3426.00
1348     3689.00
1349     1951.00
1350     2786.00
1351     2145.00
1352     3041.00
1353     3132.00
1354     3453.00
1355     3453.00
Name: Biweekly High Rate, Length: 1356, dtype: object</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">salary_ranges[<span class="string">'Biweekly High Rate'</span>] = salary_ranges[<span class="string">'Biweekly High Rate'</span>].astype(float)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">salary_ranges[<span class="string">'Grade'</span>] = salary_ranges[<span class="string">'Grade'</span>].astype(str)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">salary_ranges.head()</span><br></pre></td></tr></table></figure>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}</code></pre><p></style><p></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>SetID</th>
      <th>Job Code</th>
      <th>Eff Date</th>
      <th>Sal End Date</th>
      <th>Salary SetID</th>
      <th>Sal Plan</th>
      <th>Grade</th>
      <th>Step</th>
      <th>Biweekly High Rate</th>
      <th>Biweekly Low Rate</th>
      <th>Union Code</th>
      <th>Extended Step</th>
      <th>Pay Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>COMMN</td>
      <td>0109</td>
      <td>07/01/2009 12:00:00 AM</td>
      <td>06/30/2010 12:00:00 AM</td>
      <td>COMMN</td>
      <td>SFM</td>
      <td>00000</td>
      <td>1</td>
      <td>0.0</td>
      <td>$0.00</td>
      <td>330</td>
      <td>0</td>
      <td>C</td>
    </tr>
    <tr>
      <th>1</th>
      <td>COMMN</td>
      <td>0110</td>
      <td>07/01/2009 12:00:00 AM</td>
      <td>06/30/2010 12:00:00 AM</td>
      <td>COMMN</td>
      <td>SFM</td>
      <td>00000</td>
      <td>1</td>
      <td>15.0</td>
      <td>$15.00</td>
      <td>323</td>
      <td>0</td>
      <td>D</td>
    </tr>
    <tr>
      <th>2</th>
      <td>COMMN</td>
      <td>0111</td>
      <td>07/01/2009 12:00:00 AM</td>
      <td>06/30/2010 12:00:00 AM</td>
      <td>COMMN</td>
      <td>SFM</td>
      <td>00000</td>
      <td>1</td>
      <td>25.0</td>
      <td>$25.00</td>
      <td>323</td>
      <td>0</td>
      <td>D</td>
    </tr>
    <tr>
      <th>3</th>
      <td>COMMN</td>
      <td>0112</td>
      <td>07/01/2009 12:00:00 AM</td>
      <td>06/30/2010 12:00:00 AM</td>
      <td>COMMN</td>
      <td>SFM</td>
      <td>00000</td>
      <td>1</td>
      <td>50.0</td>
      <td>$50.00</td>
      <td>323</td>
      <td>0</td>
      <td>D</td>
    </tr>
    <tr>
      <th>4</th>
      <td>COMMN</td>
      <td>0114</td>
      <td>07/01/2009 12:00:00 AM</td>
      <td>06/30/2010 12:00:00 AM</td>
      <td>COMMN</td>
      <td>SFM</td>
      <td>00000</td>
      <td>1</td>
      <td>100.0</td>
      <td>$100.00</td>
      <td>323</td>
      <td>0</td>
      <td>M</td>
    </tr>
  </tbody>
</table>
</div>



<h1 id="定类等级"><a href="#定类等级" class="headerlink" title="定类等级"></a>定类等级</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">salary_ranges[<span class="string">'Grade'</span>].value_counts().head()</span><br></pre></td></tr></table></figure>

<pre><code>00000    61
07450    12
06870     9
07420     9
07170     9
Name: Grade, dtype: int64</code></pre><ul>
<li>柱状图</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">salary_ranges[<span class="string">'Grade'</span>].value_counts().sort_values(ascending = <span class="literal">False</span>).head(<span class="number">20</span>).plot(kind = <span class="string">'bar'</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20190805115038575.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Vlcnl3aA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">salary_ranges[<span class="string">'Grade'</span>].value_counts().sort_values(ascending = <span class="literal">False</span>).head(<span class="number">5</span>).plot(kind = <span class="string">'pie'</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20190805115016513.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Vlcnl3aA==,size_16,color_FFFFFF,t_70" alt="\[外链图片转存失败(img-bTIygytA-1564974207418)(output_18_0.png)\]"></p>
<h1 id="定序等级"><a href="#定序等级" class="headerlink" title="定序等级"></a>定序等级</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!cd</span><br></pre></td></tr></table></figure>

<pre><code>E:\Python\特征工程入门与实践</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">customer = pd.read_csv(<span class="string">'data/2013_SFO_Customer_survey.csv'</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">customer.shape</span><br></pre></td></tr></table></figure>

<pre><code>(3535, 95)</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">art_ratings = customer[<span class="string">'Q7A_ART'</span>]</span><br><span class="line">art_ratings.describe()</span><br></pre></td></tr></table></figure>

<pre><code>count    3535.000000
mean        4.300707
std         1.341445
min         0.000000
25%         3.000000
50%         4.000000
75%         5.000000
max         6.000000
Name: Q7A_ART, dtype: float64</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">art_ratings = art_ratings[(art_ratings &gt; <span class="number">1</span>) &amp; (art_ratings &lt;= <span class="number">5</span>)]</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">art_ratings = art_ratings.astype(str)</span><br><span class="line">art_ratings.describe()</span><br></pre></td></tr></table></figure>

<pre><code>count     2636
unique       4
top          4
freq      1066
Name: Q7A_ART, dtype: object</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">art_ratings.value_counts().plot(kind = <span class="string">'pie'</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20190805115054956.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Vlcnl3aA==,size_16,color_FFFFFF,t_70" alt="\[外链图片转存失败(img-oOtAsyWI-1564974207420)(output_26_0.png)\]"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">art_ratings.value_counts().plot(kind = <span class="string">'bar'</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20190805115108835.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Vlcnl3aA==,size_16,color_FFFFFF,t_70" alt="\[外链图片转存失败(img-DNsgOvdF-1564974207421)(output_27_0.png)\]"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">art_ratings.value_counts().plot(kind = <span class="string">'box'</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20190805115120405.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Vlcnl3aA==,size_16,color_FFFFFF,t_70" alt="\[外链图片转存失败(img-nl2fs8D7-1564974207423)(output_28_0.png)\]"></p>
<h1 id="定序等级-1"><a href="#定序等级-1" class="headerlink" title="定序等级"></a>定序等级</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">climate = pd.read_csv(<span class="string">'data/GlobalLandTemperaturesByCity.csv'</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">climate.head()</span><br></pre></td></tr></table></figure>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}</code></pre><p></style><p></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dt</th>
      <th>AverageTemperature</th>
      <th>AverageTemperatureUncertainty</th>
      <th>City</th>
      <th>Country</th>
      <th>Latitude</th>
      <th>Longitude</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1743-11-01</td>
      <td>6.068</td>
      <td>1.737</td>
      <td>Århus</td>
      <td>Denmark</td>
      <td>57.05N</td>
      <td>10.33E</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1743-12-01</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Århus</td>
      <td>Denmark</td>
      <td>57.05N</td>
      <td>10.33E</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1744-01-01</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Århus</td>
      <td>Denmark</td>
      <td>57.05N</td>
      <td>10.33E</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1744-02-01</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Århus</td>
      <td>Denmark</td>
      <td>57.05N</td>
      <td>10.33E</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1744-03-01</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Århus</td>
      <td>Denmark</td>
      <td>57.05N</td>
      <td>10.33E</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 移除缺失值</span></span><br><span class="line">climate.dropna(axis = <span class="number">0</span>, inplace = <span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">climate.head()</span><br></pre></td></tr></table></figure>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}</code></pre><p></style><p></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dt</th>
      <th>AverageTemperature</th>
      <th>AverageTemperatureUncertainty</th>
      <th>City</th>
      <th>Country</th>
      <th>Latitude</th>
      <th>Longitude</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1743-11-01</td>
      <td>6.068</td>
      <td>1.737</td>
      <td>Århus</td>
      <td>Denmark</td>
      <td>57.05N</td>
      <td>10.33E</td>
    </tr>
    <tr>
      <th>5</th>
      <td>1744-04-01</td>
      <td>5.788</td>
      <td>3.624</td>
      <td>Århus</td>
      <td>Denmark</td>
      <td>57.05N</td>
      <td>10.33E</td>
    </tr>
    <tr>
      <th>6</th>
      <td>1744-05-01</td>
      <td>10.644</td>
      <td>1.283</td>
      <td>Århus</td>
      <td>Denmark</td>
      <td>57.05N</td>
      <td>10.33E</td>
    </tr>
    <tr>
      <th>7</th>
      <td>1744-06-01</td>
      <td>14.051</td>
      <td>1.347</td>
      <td>Århus</td>
      <td>Denmark</td>
      <td>57.05N</td>
      <td>10.33E</td>
    </tr>
    <tr>
      <th>8</th>
      <td>1744-07-01</td>
      <td>16.082</td>
      <td>1.396</td>
      <td>Århus</td>
      <td>Denmark</td>
      <td>57.05N</td>
      <td>10.33E</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">climate.isnull().sum()</span><br></pre></td></tr></table></figure>

<pre><code>dt                               0
AverageTemperature               0
AverageTemperatureUncertainty    0
City                             0
Country                          0
Latitude                         0
Longitude                        0
dtype: int64</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">climate[<span class="string">'AverageTemperature'</span>].hist();</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20190805115137317.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Vlcnl3aA==,size_16,color_FFFFFF,t_70" alt="\[外链图片转存失败(img-D8bKoUqv-1564974207425)(output_35_0.png)\]"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">climate[<span class="string">'AverageTemperature'</span>].mean()</span><br></pre></td></tr></table></figure>

<pre><code>16.727432636247972</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">climate[<span class="string">'dt'</span>] = pd.to_datetime(climate[<span class="string">'dt'</span>])</span><br><span class="line">climate[<span class="string">'year'</span>] = climate[<span class="string">'dt'</span>].map(<span class="keyword">lambda</span> x: x.year)</span><br><span class="line">climate_sub_us = climate.loc[climate[<span class="string">'Country'</span>] == <span class="string">'United States'</span>]</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">climate_sub_us[<span class="string">'century'</span>] = climate_sub_us[<span class="string">'year'</span>].map(<span class="keyword">lambda</span> x : int(x/<span class="number">100</span> + <span class="number">1</span>))</span><br></pre></td></tr></table></figure>

<pre><code>D:\Anaconda\lib\site-packages\ipykernel_launcher.py:1: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-view-versus-copy
  &quot;&quot;&quot;Entry point for launching an IPython kernel.</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">climate_sub_us.head()</span><br></pre></td></tr></table></figure>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}</code></pre><p></style><p></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dt</th>
      <th>AverageTemperature</th>
      <th>AverageTemperatureUncertainty</th>
      <th>City</th>
      <th>Country</th>
      <th>Latitude</th>
      <th>Longitude</th>
      <th>year</th>
      <th>century</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>47555</th>
      <td>1820-01-01</td>
      <td>2.101</td>
      <td>3.217</td>
      <td>Abilene</td>
      <td>United States</td>
      <td>32.95N</td>
      <td>100.53W</td>
      <td>1820</td>
      <td>19</td>
    </tr>
    <tr>
      <th>47556</th>
      <td>1820-02-01</td>
      <td>6.926</td>
      <td>2.853</td>
      <td>Abilene</td>
      <td>United States</td>
      <td>32.95N</td>
      <td>100.53W</td>
      <td>1820</td>
      <td>19</td>
    </tr>
    <tr>
      <th>47557</th>
      <td>1820-03-01</td>
      <td>10.767</td>
      <td>2.395</td>
      <td>Abilene</td>
      <td>United States</td>
      <td>32.95N</td>
      <td>100.53W</td>
      <td>1820</td>
      <td>19</td>
    </tr>
    <tr>
      <th>47558</th>
      <td>1820-04-01</td>
      <td>17.989</td>
      <td>2.202</td>
      <td>Abilene</td>
      <td>United States</td>
      <td>32.95N</td>
      <td>100.53W</td>
      <td>1820</td>
      <td>19</td>
    </tr>
    <tr>
      <th>47559</th>
      <td>1820-05-01</td>
      <td>21.809</td>
      <td>2.036</td>
      <td>Abilene</td>
      <td>United States</td>
      <td>32.95N</td>
      <td>100.53W</td>
      <td>1820</td>
      <td>19</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">climate_sub_us[<span class="string">'AverageTemperature'</span>].hist(by = climate_sub_us[<span class="string">"century"</span>], sharex = <span class="literal">True</span>, sharey = <span class="literal">True</span>, figsize = (<span class="number">10</span>,<span class="number">10</span>), bins = <span class="number">20</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20190805115150292.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Vlcnl3aA==,size_16,color_FFFFFF,t_70" alt="\[外链图片转存失败(img-6nmg8ois-1564974207426)(output_40_0.png)\]"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">climate_sub_us.groupby(<span class="string">'century'</span>)[<span class="string">'AverageTemperature'</span>].mean().plot(kind = <span class="string">'line'</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20190805115159105.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Vlcnl3aA==,size_16,color_FFFFFF,t_70" alt="\[外链图片转存失败(img-g0ick3he-1564974207427)(output_41_0.png)\]"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">century_changes = climate_sub_us.groupby(<span class="string">'century'</span>)[<span class="string">'AverageTemperature'</span>].mean()</span><br><span class="line">century_changes</span><br></pre></td></tr></table></figure>

<pre><code>century
18    12.073243
19    13.662870
20    14.386622
21    15.197692
Name: AverageTemperature, dtype: float64</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">century_changes[<span class="number">21</span>] - century_changes[<span class="number">18</span>]</span><br></pre></td></tr></table></figure>

<pre><code>3.124449115460754</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x = climate_sub_us[<span class="string">'year'</span>]</span><br><span class="line">y = climate_sub_us[<span class="string">'AverageTemperature'</span>]</span><br><span class="line">fig, ax = plt.subplots(figsize = (<span class="number">10</span>,<span class="number">5</span>))</span><br><span class="line">ax.scatter(x,y)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20190805115214123.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Vlcnl3aA==,size_16,color_FFFFFF,t_70" alt="\[外链图片转存失败(img-l1nlrK4z-1564974207428)(output_44_0.png)\]"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">climate_sub_us.groupby(<span class="string">'year'</span>).mean()[<span class="string">'AverageTemperature'</span>].plot();</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20190805115222759.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Vlcnl3aA==,size_16,color_FFFFFF,t_70" alt="\[外链图片转存失败(img-iFId5A8U-1564974207431)(output_45_0.png)\]"></p>
<ul>
<li>使用滑动均值平滑曲线</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">climate_sub_us.groupby(<span class="string">'year'</span>).mean()[<span class="string">'AverageTemperature'</span>].rolling(<span class="number">10</span>).mean().plot();</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20190805115230335.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Vlcnl3aA==,size_16,color_FFFFFF,t_70" alt="\[外链图片转存失败(img-NOOJdipq-1564974207433)(output_47_0.png)\]"></p>
<h1 id="定比等级"><a href="#定比等级" class="headerlink" title="定比等级"></a>定比等级</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure(figsize = (<span class="number">15</span>,<span class="number">5</span>))</span><br><span class="line">ax = fig.gca()</span><br><span class="line"></span><br><span class="line">salary_ranges.groupby(<span class="string">'Grade'</span>)[[<span class="string">'Biweekly High Rate'</span>]].mean().sort_values(<span class="string">'Biweekly High Rate'</span>,ascending = <span class="literal">False</span>).head(<span class="number">20</span>).plot.bar(</span><br><span class="line">    stacked = <span class="literal">False</span>, ax= ax, color = <span class="string">'darkorange'</span>);</span><br><span class="line">ax.set_title(<span class="string">'Top 20 Grade by mean Biweekly High Rate'</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/2019080511524064.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Vlcnl3aA==,size_16,color_FFFFFF,t_70" alt="\[外链图片转存失败(img-ewHsDBd8-1564974207436)(output_49_0.png)\]"></p>
<ul>
<li>比较工资最高的员工与工资最低员工的差距</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sorted_df = salary_ranges.groupby(<span class="string">'Grade'</span>)[[<span class="string">'Biweekly High Rate'</span>]].mean().sort_values(<span class="string">'Biweekly High Rate'</span>,ascending = <span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sorted_df.iloc[<span class="number">0</span>][<span class="number">0</span>] / sorted_df.iloc[<span class="number">-1</span>][<span class="number">0</span>]</span><br></pre></td></tr></table></figure>

<pre><code>13.931919540229886</code></pre>
      
    </div>

    

    
      
    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        
          
        
        <div class="post-tags">
          
            <a href="/tags/特征工程入门与实践/" rel="tag"># 特征工程入门与实践</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/07/12/Tips (2)/" rel="next" title="Tips(2)">
                <i class="fa fa-chevron-left"></i> Tips(2)
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/08/09/Mxnet手写线性回归/" rel="prev" title="Mxnet手写线性回归">
                Mxnet手写线性回归 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  




<% if(theme.gitment.enable) { %>
<div id="gitment_title" class="gitment_title"></div>
<div id="container" style="display:none"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script>
  const myTheme = {
    render(state, instance) {
      const container = document.createElement('div');
      container.lang = "en-US";
      container.className = 'gitment-container gitment-root-container';
      container.appendChild(instance.renderHeader(state, instance));
      container.appendChild(instance.renderEditor(state, instance));
      container.appendChild(instance.renderComments(state, instance));
      container.appendChild(instance.renderFooter(state, instance));
      return container;
    }
  }

  function showGitment() {
    $("#gitment_title").attr("style", "display:none");
    $("#container").attr("style", "").addClass("gitment_container");
    var gitment = new Gitment({
      id: decodeURI(window.location.pathname),
      theme: myTheme,
      owner: 'Childish1jin',
      repo: 'Childish1jin.github.io',
      oauth: {
        client_id: '89b78712c0406690e89a',
        client_secret: '7a1f1201723900ccd24fee6d3df54781b80904ff'
      }
    });
    gitment.render('container');
  }

  showGitment();
</script>
<% } %>

        </%></%></div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Barry Wang</p>
              <div class="site-description motion-element" itemprop="description">run barry, run!</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">18</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">2</span>
                    <span class="site-state-item-name">分类</span>
                  
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">7</span>
                    <span class="site-state-item-name">标签</span>
                  
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          

          

          
          

          
        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#特征理解"><span class="nav-number">1.</span> <span class="nav-text">特征理解</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#定类等级"><span class="nav-number">2.</span> <span class="nav-text">定类等级</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#定序等级"><span class="nav-number">3.</span> <span class="nav-text">定序等级</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#定序等级-1"><span class="nav-number">4.</span> <span class="nav-text">定序等级</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#定比等级"><span class="nav-number">5.</span> <span class="nav-text">定比等级</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Barry Wang</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.2.0</div>


<div>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<span id="busuanzi_container_site_pv" style="display:none">
    本站总访问量 <span id="busuanzi_value_site_pv"></span> 次
    <span class="post-meta-divider">|</span>
</span>
<span id="busuanzi_container_site_uv" style="display:none">
    有<span id="busuanzi_value_site_uv"></span>人看过我的博客啦
</span>
</div>



        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>










  
  













  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>




  <script src="/js/utils.js?v=7.2.0"></script>

  <script src="/js/motion.js?v=7.2.0"></script>



  
  


  <script src="/js/affix.js?v=7.2.0"></script>

  <script src="/js/schemes/pisces.js?v=7.2.0"></script>



  
  <script src="/js/scrollspy.js?v=7.2.0"></script>
<script src="/js/post-details.js?v=7.2.0"></script>



  <script src="/js/next-boot.js?v=7.2.0"></script>

  

  

  

  

  


  


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  

  

  

  

  

  

  

  

  

  


  

</body>
</html>
